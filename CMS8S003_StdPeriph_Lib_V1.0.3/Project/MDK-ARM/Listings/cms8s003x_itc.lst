C51 COMPILER V9.59.0.0   CMS8S003X_ITC                                                     05/29/2018 01:21:17 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE CMS8S003X_ITC
OBJECT MODULE PLACED IN .\Objects\cms8s003x_itc.obj
COMPILER INVOKED BY: D:\Install software\keil5\C51\BIN\C51.EXE ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_
                    -itc.c OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\Libraries\CMS8S003x_StdPeriph_Driver\inc) DEBUG PRINT(.\Listings\cms8s0
                    -03x_itc.lst) TABS(2) OBJECT(.\Objects\cms8s003x_itc.obj)

line level    source

   1          /**
   2            ******************************************************************************
   3            * @file    cms8s003x_itc.c
   4            * @author  LI WEI
   5            * @version V1.0.3
   6            * @date    04/24/2010
   7            * @brief   This file provides all the ITC firmware functions.
   8            ******************************************************************************
   9            * @copy
  10            *
  11            * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  12            * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  13            * TIME. AS A RESULT, CMSemicon SHALL NOT BE HELD LIABLE FOR ANY
  14            * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  15            * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  16            * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  17            *
  18            * <h2><center>&copy; COPYRIGHT 2018 CMSemicon</center></h2>
  19            */
  20          
  21          /* Includes ------------------------------------------------------------------*/
  22          #include "cms8s003x_itc.h"
  23          #include "cms8s003x_spi.h"
  24          #include "cms8s003x_tim01.h"
  25          #include "cms8s003x_gpio.h"
  26          
  27          /** @addtogroup CMS8S003x_StdPeriph_Driver
  28            * @{
  29            */
  30          
  31          /* Private typedef -----------------------------------------------------------*/
  32          /* Private define ------------------------------------------------------------*/
  33          /* Private macro -------------------------------------------------------------*/
  34          /* Private variables ---------------------------------------------------------*/
  35          uint32_t timer0Count = 0;
  36          /* Private function prototypes -----------------------------------------------*/
  37          /* Private functions ---------------------------------------------------------*/
  38          
  39          /** @addtogroup ITC_Private_Functions
  40            * @{
  41            */
  42          
  43          
  44          
  45          /**
  46            * @}
  47            */
  48          
  49          /** @addtogroup ITC_Public_Functions
  50            * @{
  51            */
  52          
  53          /**
C51 COMPILER V9.59.0.0   CMS8S003X_ITC                                                     05/29/2018 01:21:17 PAGE 2   

  54            * @brief  Deinitializes the ITC registers to their default reset value.
  55            * @param  None
  56            * @retval None
  57           */
  58          void ITC_DeInit(void)
  59          {
  60   1      
  61   1      }
  62          
  63          //unsigned int times = 0;   
  64          void SPI_ISR() interrupt 22
  65          {
  66   1        FlagStatus status = 0;
  67   1        ITStatus  itS = 0;
  68   1        if(SPI_GetFlagStatus(Peripheral_SPI_Interrupt)) //SPI总中断指示位  清除具体的中断标志位后 此位自动清除
  69   1        {
  70   2          if(SPI_GetITStatus(SPI_FLAG_SPISIF))        //SPI传输完毕中断标志位 先读SPSR 再度写SPDR后清0
  71   2          {
  72   3             /*if(times<5)
  73   3             {
  74   3               Master_Received[times] = SPI_ReceiveData();
  75   3              
  76   3               if(times < 4)
  77   3                 SPI_SendData(0x40);
  78   3             }
  79   3             times++;*/
  80   3          }
  81   2          else if(SPI_GetITStatus(SPI_FLAG_WCOL))   //SPI 写冲突中断标志位 先读SPSR 再读写SPDR后清0
  82   2          {
  83   3      
  84   3          }
  85   2          else if(SPI_GetITStatus(SPI_FLAG_MODF))   //SPI模式错误中断标志 先读SPSR 再读写SPCR后清0
  86   2          {
  87   3          }
  88   2        }
  89   1      }
  90          
  91          
  92          void timer0_int (void) interrupt 1
  93          {
  94   1        uint32_t counter = 0;
  95   1        if(TIM0_GetITStatus())
  96   1        {
  97   2          timer0Count++;
  98   2          if(timer0Count > 100) timer0Count = 0;
  99   2          if(timer0Count%2) GPIO_Write(GPIO_PORT_1, 0xff);
 100   2          else GPIO_Write(GPIO_PORT_1, 0);
 101   2          //counter = TIM0_GetCounter();
 102   2        }
 103   1        TIM0_ClearITPendingBit();
 104   1      }
 105          
 106          void timer1_int (void) interrupt 3
 107          {
 108   1      
 109   1      }
 110          
 111          void timer2_int (void) interrupt 5
 112          {
 113   1        if(TIM2_GetITStatus(TIM2_Overflow_Flag))
*** ERROR C202 IN LINE 113 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_Overflow_Flag': unde
             -fined identifier
C51 COMPILER V9.59.0.0   CMS8S003X_ITC                                                     05/29/2018 01:21:17 PAGE 3   

 114   1        {
 115   2            TIM2_ClearITPendingBit(TIM2_Overflow_Flag);
*** ERROR C202 IN LINE 115 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_Overflow_Flag': unde
             -fined identifier
 116   2        }
 117   1        
 118   1        if(TIM2_GetITStatus(TIM2_Reload_Flag))
*** ERROR C202 IN LINE 118 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_Reload_Flag': undefi
             -ned identifier
 119   1        {
 120   2            TIM2_ClearITPendingBit(TIM2_Reload_Flag);
*** ERROR C202 IN LINE 120 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_Reload_Flag': undefi
             -ned identifier
 121   2        }
 122   1        
 123   1        if(TIM2_GetITStatus(TIM2_OOC3_Flag))
*** ERROR C202 IN LINE 123 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC3_Flag': undefine
             -d identifier
 124   1        {
 125   2            TIM2_ClearITPendingBit(TIM2_OOC3_Flag);
*** ERROR C202 IN LINE 125 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC3_Flag': undefine
             -d identifier
 126   2        }
 127   1        
 128   1        if(TIM2_GetITStatus(TIM2_OOC2_Flag))
*** ERROR C202 IN LINE 128 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC2_Flag': undefine
             -d identifier
 129   1        {
 130   2            TIM2_ClearITPendingBit(TIM2_OOC2_Flag);
*** ERROR C202 IN LINE 130 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC2_Flag': undefine
             -d identifier
 131   2        }
 132   1        
 133   1        if(TIM2_GetITStatus(TIM2_OOC1_Flag))
*** ERROR C202 IN LINE 133 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC1_Flag': undefine
             -d identifier
 134   1        {
 135   2            TIM2_ClearITPendingBit(TIM2_OOC1_Flag);
*** ERROR C202 IN LINE 135 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC1_Flag': undefine
             -d identifier
 136   2        }
 137   1        
 138   1        if(TIM2_GetITStatus(TIM2_OOC0_Flag))
*** ERROR C202 IN LINE 138 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC0_Flag': undefine
             -d identifier
 139   1        {
 140   2            TIM2_ClearITPendingBit(TIM2_OOC0_Flag);
*** ERROR C202 IN LINE 140 OF ..\..\Libraries\CMS8S003x_StdPeriph_Driver\src\cms8s003x_itc.c: 'TIM2_OOC0_Flag': undefine
             -d identifier
 141   2        }
 142   1      }
 143          
 144          void timer3_int (void) interrupt 15
 145          {
 146   1      
 147   1      }
 148          
 149          void timer4_int (void) interrupt 16
 150          {
 151   1      
 152   1      }
 153          
C51 COMPILER V9.59.0.0   CMS8S003X_ITC                                                     05/29/2018 01:21:17 PAGE 4   

 154          
 155          /**
 156            * @}
 157            */
 158          
 159          /**
 160            * @}
 161            */
 162          
 163          /******************* (C) COPYRIGHT 2018 CMSemicon *****END OF FILE****/

C51 COMPILATION COMPLETE.  0 WARNING(S),  12 ERROR(S)
